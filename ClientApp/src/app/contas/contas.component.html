<div>
  <div ng-app="myApp" class="row">
    <div class="col-sm-12">
      <h3>{{title}}</h3>
      <hr />
      <mat-card>
        <form #empadd="ngForm" (submit)="salvar(empadd)">
          <div class="col-sm-12">
            <mat-form-field class="row col-sm-1">
              <input id="id" readonly  name="idContas" idContas matInput maxlength="150" placeholder="Id" [(ngModel)]='objconta.idContas' #idContas="ngModel" >
            </mat-form-field>
          </div>
          <div class="row col-sm-12">
            <mat-form-field class="col-sm-6">
              <input name="descricao" descricao matInput maxlength="150" placeholder="Tipo de conta" [(ngModel)]='objconta.descricao' #descricao="ngModel" required>
              <mat-error *ngIf="descricao.touched && !descricao.valid ">Este campo é obrigatorio</mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-3">
              <mat-select name="idtpconta" placeholder="Tipode de Contas" idtpconta [(ngModel)]='objconta.idtpconta' #idtpconta='ngModel' id="parcela" required>
                <mat-option *ngFor="let list of tpconta" value = {{list.idtpconta}}>{{list.descricao}}</mat-option>
              </mat-select>
              <mat-error *ngIf="idtpconta.touched && !idtpconta.valid ">Este campo é obrigatorio</mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-3">
              <input currencyMask matInput placeholder="Valor" name="valor" valor [(ngModel)]='objconta.valor' #valor="ngModel" autocomplete="off" maxlength="50" class="exemplo-right-align dinheiro" required [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">
              <mat-error *ngIf="valor.touched && !valor.valid ">Este campo é obrigatorio</mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-1">
              <mat-select name="parcela" placeholder="Nº parcela" id="parcela" parcela [(ngModel)]="objconta.parcela" #parcela="ngModel" required>
                <mat-option value='1'>1</mat-option>
                <mat-option value='2' >2</mat-option>
                <mat-option value='3'  >3</mat-option>
                <mat-option value='4'  >4</mat-option>
                <mat-option value='5'  >5</mat-option>
                <mat-option value='6'  >6</mat-option>
                <mat-option value='7'  >7</mat-option>
                <mat-option value='8'  >8</mat-option>
                <mat-option value='9'  >9</mat-option>
                <mat-option value='10'  >10</mat-option>
                <mat-option value='11'  >11</mat-option>
                <mat-option value='12'  >12</mat-option>
                <mat-option value='13'  >13</mat-option>
                <mat-option value='14'  >14</mat-option>
                <mat-option value='15'  >15</mat-option>
                <mat-option value='16'  >16</mat-option>
                <mat-option value='17'  >17</mat-option>
                <mat-option value='18'  >18</mat-option>
                <mat-option value='19'  >19</mat-option>
                <mat-option value='20'  >20</mat-option>
                <mat-option value='21'  >21</mat-option>
                <mat-option value='22'  >22</mat-option>
                <mat-option value='23'  >23</mat-option>
                <mat-option value='24'  >24</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-sm-3 col-xl-2">
              <input type="date" matInput placeholder="Vencimento" name="vencimento" vencimento [(ngModel)]='objconta.vencimento' #vencimento="ngModel" autocomplete="off" class="exemplo-right-align dinheiro" required>
            </mat-form-field>
            </div>
            <div class="col-sm-12 exemplo-right-align ">
              <button type="submit" mat-flat-button color="primary"><mat-icon style="font-size:20px">save</mat-icon>Salvar</button>
            </div>
        </form>
      </mat-card>
    </div>
  </div>

  <mat-expansion-panel [expanded]="0">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Lista de contas
      </mat-panel-title>
    </mat-expansion-panel-header>
    <mat-panel-description>
    </mat-panel-description>
    <div class="row">
      <div class="col-sm-12">
        <div row>
          <mat-form-field class="row col-sm-4">
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Pesquisar">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
          <mat-form-field class="col-sm-2">
            <input matInput class="exemplo-right-align" type="date" (keyup)="applyFilter($event.target.value)" (change)="applyFilter($event.target.value)" placeholder="Filtrar por data" />
            <mat-icon matSuffix>calendar_today</mat-icon>
          </mat-form-field>
        </div>
        <table mat-table class="exemplo-right-align" [dataSource]="listData" matSort style="width:100%" class="table-sm table-hover">
          <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->
          <!-- Position Column -->
          <ng-container matColumnDef="idContas">
            <th class="" hidden mat-header-cell *matHeaderCellDef> ID </th>
            <td mat-cell hidden *matCellDef="let element"> {{element.idContas}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="decricao">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Descrição </th>
            <td mat-cell *matCellDef="let element"> {{element.descricao}} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="parcela">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Parcela </th>
            <td mat-cell *matCellDef="let element"> {{element.parcela}} </td>
          </ng-container>
          <ng-container matColumnDef="valor">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Valor R$ </th>
            <td mat-cell *matCellDef="let element"> {{element.valor |number:'1.2-2':'pt-BR'}} </td>
          </ng-container>
          <ng-container matColumnDef="vencimento">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Vencimento </th>
            <td mat-cell *matCellDef="let element"> {{element.vencimento|date:'shortDate'}} </td>
          </ng-container>
          <ng-container matColumnDef="Operacao">
            <th mat-header-cell *matHeaderCellDef>  </th>
            <td style="text-align: right;" mat-cell *matCellDef="let element"><button class="btn btn-sm btn-primary" matTooltip="Editar" matTooltipPosition="above" (click)="loadForm(element.idContas,element.descricao,element.valor,element.parcela,element.vencimento)">
              <span class="fas fa-pen"></span></button><button class="btn btn-sm btn-danger" matTooltip="Excluir" matTooltipPosition="above" (click)="delete(element.idContas)"><span class="fas fa-trash"></span></button> </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5,10, 20]" showFirstLastButtons></mat-paginator>
      </div>

    </div>

  </mat-expansion-panel>
</div>


